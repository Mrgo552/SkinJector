<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SkinJector</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>

<h1>SkinJector</h1>
<p>Generate a resource pack for non-premium Minecraft skins</p>

<label for="mcVersion">
    Game version:
</label>
<select id="mcVersion">
    <option value="1">1.8</option>
    <option value="1">1.9 – 1.10</option>
    <option value="3">1.11 – 1.12</option>
    <option value="4">1.13 – 1.14</option>
    <option value="5">1.15 – 1.16.1</option>
    <option value="6">1.16.2 – 1.17</option>
    <option value="8" selected>1.18 – 1.19</option>
</select>

<br><br>

<input type="file" id="skinInput" accept="image/png">
<br><br>
<button onclick="generatePack()">Generate Resource Pack</button>

<script>
async function generatePack() {
    const input = document.getElementById("skinInput");
    const packFormat = Number(document.getElementById("mcVersion").value);

    if (!input.files.length) {
        alert("Please upload a skin.");
        return;
    }

    const skinData = await input.files[0].arrayBuffer();
    const zip = new JSZip();

    zip.file("pack.mcmeta", JSON.stringify({
        pack: {
            pack_format: packFormat,
            description: "SkinJector Resource Pack"
        }
    }, null, 2));

    zip.file(
        "assets/minecraft/textures/entity/steve.png",
        skinData
    );

    const blob = await zip.generateAsync({ type: "blob" });

    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "SkinJector.zip";
    a.click();
}
</script>

</body>
</html>
