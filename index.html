<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SkinJector</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>

<h1>SkinJector</h1>
<p>Generate a resource pack for non-premium Minecraft skins</p>

<label>
    Game version (up to 1.19):
    <select id="mcVersion">
        <option value="6">1.16 – 1.17</option>
        <option value="8" selected>1.18 – 1.19</option>
    </select>
</label>

<br><br>

<input type="file" id="skinInput" accept="image/png">
<br><br>
<button onclick="generatePack()">Generate Resource Pack</button>

<script>
async function generatePack() {
    const input = document.getElementById("skinInput");
    const packFormat = document.getElementById("mcVersion").value;

    if (!input.files.length) {
        alert("Please upload a skin.");
        return;
    }

    const skinFile = input.files[0];
    const skinData = await skinFile.arrayBuffer();

    const zip = new JSZip();

    // pack.mcmeta
    zip.file("pack.mcmeta", JSON.stringify({
        pack: {
            pack_format: Number(packFormat),
            description: "SkinJector Resource Pack"
        }
    }, null, 2));

    // skin file
    zip.file(
        "assets/minecraft/textures/entity/steve.png",
        skinData
    );

    // generate zip
    const content = await zip.generateAsync({ type: "blob" });

    const a = document.createElement("a");
    a.href = URL.createObjectURL(content);
    a.download = "SkinJector.zip";
    a.click();
}
</script>

</body>
</html>
